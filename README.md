
# bazi.py — 命盘排盘 + 扶抑判定 + 单字分析

`bazi.py` 是一个用于 **八字排盘、五行分数统计、扶抑分类、单字逐字分析、整柱关系与大运滚动显示** 的命理工具。  
支持 **公历 / 农历 / 直接输入八字** 三种调用方式。

依赖：
- `lunar_python` —— 农历、节气、干支计算
- `colorama` —— 终端输出着色

安装：
```
pip install lunar_python colorama
```

---

## 运行方式

`bazi.py` 提供四种输入方式，只需满足其中之一：

| 输入方式 | 参数 | 说明 |
|----------|------|------|
| **公历输入** | `--solar 年 月 日 时` | 自动转换为农历并排盘 |
| **农历输入** | `--lunar 年 月 日 时` | 可处理闰月，自动转换为公历 |
| **直接输入八字** | `--bazi 甲子 乙丑 ...` | 需提供 **8 字**（4柱） |
| **裸数字（最后兜底）** | `年 月 日 时` | 默认视为 **公历**，无参数时使用 |

指定性别（影响大运起运）：  
```

--sex m   # 男命（默认）
--sex f   # 女命

```

---

## 输出内容说明

运行后依次输出：

```

① 基本信息（公历/农历、节气、大运起运、命宫/胎元/身宫）
② 八字四柱（彩色输出）
③ 当前大运、流年、流月、流日
④ 地支藏干与十神
⑤ 五行分数 + 温度调候 + 扶抑分类（从局 / 假从 / 喜扶 / 扶抑影响不大 / 喜抑 / 假专旺 / 专旺）
⑥ 单字分析（逐柱标记：得势/盖头/截脚/暗合/透出/墓库等）
⑦ 整柱关系（天地自合 / 双冲 / 双合）
⑧ 大运十柱（真实滚动）

```

其中：
- **温度** → 由天干地支温度表叠加，用于参考调候  
- **扶抑分类** → 依据承载力（weak/strong）与分布比例自动给出七档标签  
- **单字分析** → 每个字独立判断得势、透干、墓库开合等局部结构

---

## 示例

### ① 公历输入
```

python bazi.py --sex m --solar 1995 6 18 15

```

### ② 农历输入（例如闰月）
```

python bazi.py --sex f --lunar 1991 4 12 9

```

### ③ 直接输入八字
```

python bazi.py --sex m --bazi 甲子 丙寅 癸亥 辛巳

```

### ④ 裸输入（简写）
```

python bazi.py 1988 5 2 23

```

---

## 扶抑标签解释（简）

| 标签 | 说明 |
|-------|------|
| **从局** | 盘不围日主 → 顺势为要 |
| **假从** | 趋势近从但承载未脱身 |
| **喜扶** | 身弱需补后再做功 |
| **扶抑影响不大** | 承载达标 → **看格局/做功** |
| **喜抑** | 偏旺需泄制调力 |
| **假专旺** | 接近专旺但不足以顺 |
| **专旺** | 身强围盘 → 官杀点睛/顺势最显 |

*(完整逻辑见 `classify_fu_yi()`)*

---

## 注意事项

- **参数没有自动去空格**，输入 `--bazi` 时请保持紧凑或成对
- 目前扶抑判定基于 **承载 + 比例 + 分布**，不等价传统“强弱”
- 程序不会给 **吉凶** 或 **预测**，只输出 **结构特征**

---


## License

自由使用、个人学习，引用请保留作者署名。

---

如有问题或想扩展自动 **大运扶抑动态判定 / 格局路线建议**，欢迎提交 Issue。
```

